Version 4
SHEET 1 2484 1700
WIRE 0 32 -96 32
WIRE 224 32 80 32
WIRE 496 32 304 32
WIRE 544 32 496 32
WIRE 656 32 608 32
WIRE 752 32 656 32
WIRE 880 32 752 32
WIRE 752 96 752 32
WIRE 880 96 880 32
WIRE 224 112 224 32
WIRE 304 112 304 32
WIRE 496 160 496 32
WIRE 528 160 496 160
WIRE 544 160 528 160
WIRE 656 160 656 32
WIRE 656 160 624 160
WIRE 528 224 528 160
WIRE 560 224 560 208
WIRE 560 224 528 224
WIRE 752 224 752 160
WIRE 880 224 880 176
WIRE -96 240 -96 32
WIRE 224 272 224 192
WIRE 176 288 80 288
WIRE 80 304 80 288
WIRE 496 304 496 160
WIRE 512 304 496 304
WIRE 608 304 608 208
WIRE 608 304 592 304
WIRE 176 336 160 336
WIRE 224 384 224 352
WIRE 80 400 80 384
WIRE 160 400 160 336
WIRE 160 400 80 400
WIRE 208 400 224 384
WIRE 208 400 160 400
WIRE 224 432 224 384
WIRE 304 432 304 192
WIRE -96 528 -96 320
WIRE 16 1120 -64 1120
WIRE 176 1120 96 1120
WIRE 384 1120 288 1120
WIRE 528 1120 448 1120
WIRE 848 1120 640 1120
WIRE -64 1168 -64 1120
WIRE 176 1168 176 1120
WIRE 288 1168 288 1120
WIRE 528 1168 528 1120
WIRE 640 1168 640 1120
WIRE 848 1168 848 1120
WIRE -64 1312 -64 1248
WIRE 176 1312 176 1248
WIRE 288 1312 288 1248
WIRE 528 1312 528 1248
WIRE 640 1312 640 1248
WIRE 848 1312 848 1248
FLAG -64 1312 0
FLAG 176 1312 0
FLAG 288 1312 0
FLAG 848 1312 0
FLAG -64 1120 Vin
FLAG 224 432 0
FLAG 304 432 0
FLAG -96 528 0
FLAG 752 224 0
FLAG 880 224 0
FLAG 528 1312 0
FLAG 640 1312 0
FLAG 848 1120 Vout
SYMBOL sw 224 368 M180
SYMATTR InstName S1
SYMBOL ind2 240 96 M0
SYMATTR InstName L1
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL voltage 80 288 R0
WINDOW 3 46 217 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 12 1u 1n 1n {D*Tsw} {Tsw})
SYMATTR InstName V2
SYMBOL voltage -96 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 24
SYMBOL res -16 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_i_in
SYMATTR Value 1µ
SYMBOL bi 176 1168 M0
WINDOW 3 -195 218 Left 2
SYMATTR Value I={D}*I(Vsense)
SYMATTR InstName B1
SYMBOL bv 288 1152 R0
WINDOW 3 -114 269 Left 2
SYMATTR Value V={D}*V(Vin)
SYMATTR InstName B2
SYMBOL voltage -64 1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 24
SYMBOL res 0 1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R_i_in_avg
SYMATTR Value 1µ
SYMBOL Misc\\cell 384 1120 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -32 32 VBottom 2
SYMATTR InstName Vsense
SYMATTR Value ""
SYMATTR SpiceLine Rser=1u
SYMBOL res 832 1152 R0
SYMATTR InstName R2
SYMATTR Value {Rload}
SYMBOL ind2 288 208 M180
WINDOW 0 36 80 Left 2
WINDOW 3 307 -192 Right 2
SYMATTR InstName L2
SYMATTR Value {Lp*Turns_Ratio**2}
SYMATTR Type ind
SYMBOL cap 736 96 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL res 864 80 R0
SYMATTR InstName R3
SYMATTR Value {Rload}
SYMBOL sw 528 160 R270
SYMATTR InstName S3
SYMBOL voltage 608 304 M270
WINDOW 3 -233 481 VLeft 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 12 {1u+D*Tsw+DT} 1n 1n {(1-D)*Tsw-2*DT} {Tsw})
SYMATTR InstName V5
SYMBOL diode 544 16 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL bv 528 1152 M0
WINDOW 3 -343 230 Left 2
SYMATTR Value V={1-D}*V(Vout)/{Turns_Ratio}
SYMATTR InstName B3
SYMBOL bi 640 1248 M180
WINDOW 3 -159 -172 Left 2
WINDOW 0 24 80 Left 2
SYMATTR Value I={1-D}*I(Vsense)/{Turns_Ratio}
SYMATTR InstName B4
TEXT 112 608 Left 2 !.model SW SW(Ron=1u Roff=100Meg Vt=5 Vh=-.4)
TEXT 112 640 Left 2 !.param D=0.25 Fsw=100k Tsw=1/Fsw DT=10n
TEXT 112 704 Left 2 !.tran 0 5m 2m startup uic
TEXT 200 -112 Left 2 ;CCM Flyback Converter Switching Model
TEXT 136 912 Left 2 ;CCM Flyback Converter DC Transformer Average Model
TEXT 208 0 Left 2 !k1 L1 L2 1
TEXT 112 672 Left 2 !.param Turns_Ratio=0.5 Lp=500u Rload=5
LINE Normal 224 1264 224 1152 1
LINE Normal 240 1264 240 1152 1
LINE Normal 256 208 256 96 1
LINE Normal 272 208 272 96 1
LINE Normal 576 1264 576 1152 1
LINE Normal 592 1264 592 1152 1
RECTANGLE Normal 1008 752 -176 -64
RECTANGLE Normal 1024 768 -192 -80
RECTANGLE Normal 1008 1536 -176 960
RECTANGLE Normal 1024 1552 -192 944
